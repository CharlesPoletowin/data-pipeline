# NFS
[Link](https://www.cnblogs.com/yinwu/p/11495683.html)
## intro
Network file system  网络文件系统   nfs共享存储
## 能做什么？
nfs 能为 不同主机系统之间    实现    文件的共享
## 为什么要使用nfs?
在集群架构中使用
## nfs能解决什么问题？
1. 解决多台机器静态资源一致性问题
2. 解决多态机器资源共享
3. 解决磁盘空间浪费的问题
## 使用nfs的注意事项?
1. 添加共享存储,只会带来网站的访问延时和消耗,并不会增加网站访问的速度.
2. CDN---->(了解即可)
    + 购买厂商CDN   --->  用户请求img--->CDN--->负载均-->Web-->存储-->CDN缓存该图片
    + 所有的web都是用共享存储,图片此时一致, 只需要将图片定期的推送至CDN 

## nfs实现的原理解析?
本地文件操作方式：
1. 当用户执行mkdir命令，BashShell无法完成该命令操作，会将其翻译给内核。
2. Kernel内核解析完成后会驱动对应的磁盘设备，完成创建目录的操作。 

## 实现原理
1. NFS客户端执行增、删等操作，客户端会使用不同的函数对该操作进行封装。(windows linux mac)
2. NFS客户端会通过TCP/IP的方式传递给NFS服务端。(可靠)
3. NFS服务端接收到请求后，会先调用portmap进程进行端口映射。
4. nfsd进程用于判断NFS客户端是否拥有权限连接NFS服务端。
5. Rpc.mount进程判断客户端是否有对应的权限进行验证。读  写
6. idmap进程实现用户映射和压缩。
7. 最后NFS服务端会将客户端的函数转换为本地能执行的命令，然后将命令传递至内核，由内核驱动硬件。

注意: rpc是一个远程过程调用，那么使用nfs必须有rpcbind服务
<br/>
